# Common light automations

- id: circadian_rhythm_setting_changes
  alias: "Valaistuksen asetusten muutokset kellonajan mukaan"
  trigger:
    - platform: time_pattern
      minutes: "/5"
  action:
    - service: python_script.circadian_rhythm

- id: light_auto_home_mode_selector_follow_home_mode
  alias: "Light auto-home-mode-selectors to follow Home Mode"
  mode: restart
  trigger:
    - platform: state
      entity_id: input_select.home_mode
  action:
    - service: input_select.select_option
      target:
        entity_id:
          - input_select.light_auto_home_mode_living_room
      data:
        option: "{{ trigger.to_state.state }}"

- id: light_store_results_automation
  alias: "Valaistuksen asetusten muutosautomatiikka"
  mode: queued
  trigger:
    - platform: state
      entity_id: input_select.light_base_mode_living_room
      id: living_room
  action:
    sequence:
    - choose:
        - conditions:
            - condition: state
              entity_id: "input_select.light_base_mode_{{ trigger.id }}"
              state: "Off"
          sequence:
            - service: input_boolean.turn_off
              entity_id: "input_boolean.light_result_state_{{ trigger.id }}"
        - conditions:
            - condition: state
              entity_id: "input_select.light_base_mode_{{ trigger.id }}"
              state: "Automatic"
            - condition: state
              entity_id: "input_select.light_auto_home_mode_{{ trigger.id }}"
              state: "Awake"
          sequence:
            - service_template: "input_boolean.turn_{{ states('input_boolean.light_auto_awake_state_'+trigger.id) }}"
              entity_id: "input_boolean.light_result_state_{{ trigger.id }}"


