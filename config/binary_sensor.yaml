- platform: template
  sensors:
    coffee_is_brewing:
      friendly_name: "Kahvi keittyy"
      delay_on:
        minutes: 1
      delay_off:
        minutes: 1
      value_template: >-
        {{ states('sensor.kahvinkeitin_current_consumption') | float(0.0) > 100 }}
    all_motion:
      device_class: motion
      value_template: "{{ is_state('group.all_motion', 'on') }}"
    all_doors:
      device_class: door
      value_template: "{{ is_state('group.all_doors', 'on') }}"
    server_cabinet_fire_alarm:
      value_template: "{{ (states('sensor.scfb_ch1_temperature') | float(0.0)) > 50 }}"
      friendly_name: "SCFB CH1 Fire Alarm"
      delay_on:
        seconds: 20
      delay_off:
        minutes: 5
      device_class: "problem"
    scfb_temp_alarm:
      value_template: "{{ (((states('sensor.scfb_ch1_temperature') | float(0.0)) - (states('sensor.scfb_ch1_target') | float(0.0))) | abs) > (states('input_number.scfb_temp_alarm_threshold') | float(0.0)) }}"
      friendly_name: "SCFB CH1 Temperature Alarm"
      delay_on:
        minutes: 3
      delay_off:
        minutes: 5
      device_class: "problem"
    scfb_fan_alarm:
      value_template: "{{ (states('sensor.scfb_ch1_speed') | int(0)) < 150 }}"
      friendly_name: "SCFB CH1 Fan Alarm"
      delay_on:
        minutes: 3
      delay_off:
        minutes: 3
      device_class: "problem"
    scfb_mode_alarm:
      value_template: "{{ (states('sensor.scfb_ch1_mode') | int(0)) != 1 }}"
      friendly_name: "SCFB CH1 Mode Alarm"
      delay_on:
        minutes: 2
      delay_off:
        minutes: 2
      device_class: "problem"
    living_room_gas_alarm:
      value_template: "{{ (states('sensor.olohuoneen_kaasutaso') | float(0.0)) > 50 }}"
      friendly_name: "Olohuoneen kaasuhälytys"
      delay_on:
        seconds: 20
      delay_off:
        seconds: 20
      device_class: "problem"
    living_room_particle_alarm:
      value_template: "{{ (states('sensor.particulate_matter_2_5um_concentration') | float(0.0)) > 150 }}"
      friendly_name: "Olohuoneen hiukkashälytys"
      delay_on:
        minutes: 1
      delay_off:
        minutes: 2
      device_class: "problem"
    living_room_entertainment_on:
      friendly_name: "OH Viihde-elektroniikka"
      delay_on:
        seconds: 5
      delay_off:
        seconds: 20
      value_template: >-
        {{ states('sensor.living_room_entertainment_plug_power') | float(0.0) > 75 }}
- platform: rest
  resource: !secret hue_sensor_3
  value_template: "{{ value_json.state.presence }}"
  scan_interval: 2
  name: "Eteisen liike"
  device_class: motion
- platform: rest
  resource: !secret hue_sensor_21
  value_template: "{{ value_json.state.presence }}"
  scan_interval: 2
  name: "Keittiön liike"
  device_class: motion
- platform: rest
  resource: !secret hue_sensor_25
  value_template: "{{ value_json.state.presence }}"
  scan_interval: 2
  name: "Pesuhuoneen liike"
  device_class: motion
- platform: ping
  host: 8.8.8.8
  name: Ping Google
  count: 5
  scan_interval: 60
- platform: ping
  host: 192.168.20.1
  name: Ping WAN Router
  count: 5
  scan_interval: 60
- platform: meteoalarm
  country: "finland"
  province: "Varsinais-Suomi"
  language: "fi-FI"
- platform: trend
  sensors:
    pressure_trend_storm:
      entity_id: sensor.living_room_pressure
      sample_duration: 7200
      min_gradient: -0.00055
      max_samples: 480
      friendly_name: "Ilmanpaineen trendi"
# - platform: aurora
#   forecast_threshold: 50
- platform: threshold
  entity_id: sensor.pressure_hourly_trend
  name: "Sää huononee nopeasti"
  lower: -1.45
  hysteresis: 0.45 #On when under 1.9 and off when over 1
- platform: threshold
  entity_id: sensor.el_price_rank
  name: "Sähkön suhteellinen hinta korkea"
  upper: 12
- platform: threshold
  entity_id: sensor.el_price
  name: "Matalaprioriteettinen sähkön säästö"
  upper: 15
  hysteresis: 0.0
- platform: threshold
  entity_id: sensor.el_price
  name: "Korkeaprioriteettinen sähkön säästö"
  upper: 30
  hysteresis: 0.0
